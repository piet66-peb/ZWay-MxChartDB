<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
      <meta http-equiv="Pragma" content="no-cache">
      <meta http-equiv="Expires" content="0">

      <!--<base href="/ZAutomation/api/v1/load/modulemedia/MxChartDB/HTML/">-->
      <title>Chart Administration</title>
      <link rel="shortcut icon" href="../icon.png">
      <link rel='stylesheet' href='css/busy_indicator.css'>

      <script defer="" src="libs/sorttable.min.js"></script> 
      <script defer="" src='js/chart-index-lang.js'></script>
      <script defer="" src='js/ch_utils.js'></script>
      <script defer="" src='../constants.js'></script>
      <script defer="" src='js/chart-index.js'></script>
      <script defer="" src='libs/busy_indicator.min.js'></script>

      <style>
         .fog_div{
         display:none;
         position:fixed;
         top:0;
         left:0;
         height:100%;
         width:100%;
         z-index:100;
         background-color:rgba(30,30,30,.5)}
         #busybox.show{display:block}
      </style>

      <style type="text/css">
         table {
         width: 95%;
         }
         th {
         background-color: #666;
         color: #fff;
         }
         tr {
         background-color: #fffbf0;
         color: #000;
         }
         tr:nth-child(odd) {
         background-color: #e4ebf2;
         }
         tr:hover {
         background-color: #dfac20;
         color: #fff;
         }
      </style>
   </head>
   <body>
      <script>
        console.log(window.location);
        console.log('pathname='+window.location.pathname);
        console.log('parameter='+window.location.search);
      </script>          
      <br>
      <div class="flex-container">
          <div id="notification">
             <div id="AspectRatio" style='float: right;'></div>
             <div id="notification-message">Reading chart-index.js...</div>
          </div>
          <div>
              <input type="text" id="myInput" onkeyup="myFunction()" 
                    placeholder="Search for names..">      
              <button type="button" id="delInput" onclick="del()"> - </button>
    
              <input type="checkbox" id="actives" checked onchange="display(this)">
              <label id="activesT">actives charts</label>
              <input type="checkbox" id="inactives" checked onchange="display(this)">
              <label id="inactivesT">inactive charts</label>
              <input type="checkbox" id="orphaned" checked onchange="display(this)">
              <label id="orphanedT">orphaned charts</label>
              <input type="checkbox" id="snapshots" onchange="display(this)">
              <label id="snapshotsT">snapshots</label>
          </div>
          <pre id="json-renderer"></pre>
          <input type="file" accept=".json" id="selectFile">
          <button type="button" id="MxC" onclick="callMxC()"> MxC Constants </button>
      </div>

      <!-- busy indicator -->
      <div id='busybox' class='fog_div'>
         <div>&nbsp;</div>
      </div>

      <script>
        function del() {
            document.getElementById("myInput").value = '';
            myFunction();
            framing(2);
        }
      </script>
      
      <script>
        function callMxC() {
            //TODO allgemein formulieren !!!!
            var url = './MxC.html';
            window.open(url);
        }
      </script>
      <script>
        function myFunction() {
            var input, filter, table, tr, td, i, txtValue, doDisp;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            var filter_arr = [];
            if (filter.indexOf('|') > 0) { // |=OR
                filter_arr = filter.split("|");
            } else
            if (filter.indexOf(',') > 0) { // ,=AND
                filter_arr = filter.split(",");
            }
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 1; i < tr.length; i++) {
                doDisp = 0;
                for (j = 0; j < 6; j++) {
                    td = tr[i].getElementsByTagName("td")[j];
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            doDisp += 1;
                        } else {
                            for (var k = 0; k < filter_arr.length; k++) {
                                if (txtValue.toUpperCase().indexOf(filter_arr[k]) > -1) {
                                    doDisp += 1;
                                }
                            }
                            if (filter.indexOf(',') > 0) {
                                if (doDisp < filter_arr.length) {
                                    doDisp = 0;
                                }
                            }
                        }
                    }
                }
                if (doDisp) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
            input.focus();
        }
      </script>

   </body>
</html>

